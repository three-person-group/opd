<!DOCTYPE html>

<html>

<head>
   <h2>Medicine</h2>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <link rel="stylesheet" href="medicine.css">

   <style>
      #autocomplete {
         width: 250px;
         float: left;
         position: relative;

      }

      .medicinename {
         width: 100%;
         height: 36px;
         font-size: 18px;
         padding: 3px 10px;
         border-radius: 4px;
         /* border: 1px solid #e58940; */
         outline: 0;
         box-sizing: border-box;
         /*may be im z-index: 1; */
         margin-left: -10px;
      }

      .list {
         width: 100%;
         position: absolute;
         border: 1px solid #4d6e87;
         display: none;
         background-color: #4d6e87;

      }

      .list ul {
         list-style: none;
         background: #fff;
         margin: 0;
         padding: 0;
         text-align: left;

      }

      .list ul li {
         padding: 2px 10px;
         cursor: pointer;
      }

      .list ul li:hover {
         background: #d0e4f4;
      }

      .c {
         overflow-y: auto;
      }
   </style>

</head>

<body>

   <form class="form" method="post" action="">

      Date:
      <span for="" id="date"></span><br>
      Opdno:
      <span for="" id="opdno"></span><br>
      Name:
      <span for="" id="name">name</span><br>
      <br>

      <!-- <div class="c"> -->
      <div>
         <medicineel>
            <!-- Medicine Name: -->
         </medicineel>
         <div id="autocomplete">
            <input type="text" id="id-medicine-1" class="medicinename" name="smedicinename1" placeholder="medicine Name"
               autocomplete="false">
            <div id="medicinelist1" class="list" style="z-index: 1;"></div>
         </div>

         <input type="number" placeholder="Qty" id="id-qty-1" class="qty" name="sqty1">

         <input id="id-charges-1" class="ipt-charges" placeholder="Price" name="scharges1"></input>
         <br>
         <br>
      </div>

      <!-- <br><br><br><br>
         <br><br><br><br> -->
      <div>
         <medicineel>
            <!-- Medicine Name: -->
         </medicineel>
         <div id="autocomplete">
            <input type="text" id="id-medicine-2" class="medicinename" name="smedicinename2" placeholder="medicine Name"
               autocomplete="false" style=" z-index: 2;">
            <div id="medicinelist2" class="list" style="z-index: 1"></div>
         </div>


         <input type="number" placeholder="Qty" id="id-qty-2" class="qty" name="sqty2">

         <input id="id-charges-2" class="ipt-charges" placeholder="Price" name="scharges2"></input>
         <br>
         <br>

      </div>
      <!-- <br><br><br><br><br><br> -->
      <div>
         <medicineel>
            <!-- Medicine Name: -->
         </medicineel>
         <div id="autocomplete">
            <input type="text" id="id-medicine-3" class="medicinename" name="smedicinename3" placeholder="medicine Name"
               autocomplete="false">
            <div id="medicinelist3" class="list" style="z-index: 1"></div>
         </div>


         <input type="number" placeholder="Qty" id="id-qty-3" class="qty" name="sqty3">

         <input id="id-charges-3" class="ipt-charges" placeholder="Price" name="scharges3"></input>
         <br>
         <br>

      </div>

      <div>
         <medicineel>
            <!-- Medicine Name: -->
         </medicineel>
         <div id="autocomplete">
            <input type="text" id="id-medicine-4" class="medicinename" name="smedicinename4" placeholder="medicine Name"
               autocomplete="false">
            <div id="medicinelist4" class="list" style="z-index: 1"></div>
         </div>


         <input type="number" placeholder="Qty" id="id-qty-4" class="qty" name="sqty4">

         <input id="id-charges-4" class="ipt-charges" placeholder="Price" name="scharges4"></input>
         <br>
         <br>

      </div>

      <div>
         <medicineel>
            <!-- Medicine Name: -->
         </medicineel>
         <div id="autocomplete">
            <input type="text" id="id-medicine-5" class="medicinename" name="smedicinename5" placeholder="medicine Name"
               autocomplete="false">
            <div id="medicinelist5" class="list" style="z-index: 1"></div>
         </div>


         <input type="number" placeholder="Qty" id="id-qty-5" class="qty" name="sqty5">

         <input id="id-charges-5" class="ipt-charges" placeholder="Price" name="scharges5"></input>
         <br>
         <br>

      </div>

      <div>
         <medicineel>
            <!-- Medicine Name: -->
         </medicineel>
         <div id="autocomplete">
            <input type="text" id="id-medicine-6" class="medicinename" name="smedicinename6" placeholder="medicine Name"
               autocomplete="false">
            <div id="medicinelist6" class="list" style="z-index: 1"></div>
         </div>


         <input type="number" placeholder="Qty" id="id-qty-6" class="qty" name="sqty6">

         <input id="id-charges-6" class="ipt-charges" placeholder="Price" name="scharges6"></input>
         <br>
         <br>

      </div>

      <!-- </div> -->

      <div>
         <span id="">no:
         </span>
         <input id="totalno" value="0"></input>
         <!-- <br> -->
         <span id="" style="padding-left: 50px;">qty:
         </span>
         <input id="totalqty" value="0"></input>
         <!-- <br> -->
         <span id="">Total:
         </span>
         <input id="total" value="0"></input>
         <br><br>
      </div>
      <button class="btn" role="button" type="submit" id="id-btnsub" name="Submit">Submit</button>

   </form>

   <script>

      $(document).ready(function () {


         //for opdno and date
         var opdno = localStorage.getItem('opdno')  //"107"
         opdno = parseInt(opdno)
         var date1 = localStorage.getItem('date')    //"2022-03-04"
         var name1 = localStorage.getItem('name')    //"2022-03-04"


         $("#date").text(date1);
         $("#opdno").text(opdno);
         $("#name").text(name1);

         // for id1 medicine name auto seach click and blur event
         $("#id-medicine-1").on("keyup", medicinename1)


         // for id2 medicine name auto seach click and blur event
         $("#id-medicine-2").on("keyup", medicinename2);

         // for id3 medicine name auto seach click and blur event
         $("#id-medicine-3").on("keyup", medicinename3);

         // for id4 medicine name auto seach click and blur event
         $("#id-medicine-4").on("keyup", medicinename4);

         // for id5 medicine name auto seach click and blur event
         $("#id-medicine-5").on("keyup", medicinename5);

         // for id6 medicine name auto seach click and blur event
         $("#id-medicine-6").on("keyup", medicinename6);


         // when focus on charges class
         // $(document).on("blur", "#id-medicine-1", charge1)
         // $(document).on("blur", "#id-medicine-2", charge2)
         // $(document).on("blur", "#id-medicine-3", charge3);



         // to get data from medicine table in charges field on foucus
         function charge1() {
            $("#id-charges-1").html("");

            var medicine_name = $("#id-medicine-1").val();
            var obj = { smedicine_name: medicine_name };
            var jsonname = JSON.stringify(obj)

            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-fetch-one.php',
               type: "POST",
               data: jsonname,
               success: function (data) {

                  var db = (JSON.parse(data));
                  // console.log(db);


                  if (data.status == false) {
                     $("#id-charges-1").val("Cant Fetch");
                  }
                  else {
                     $("#id-charges-1").val(db[0].CHARGES);
                     no();
                     qty();
                     totalCharges();

                  }
               }
            });

         }

         function charge2() {
            $("#id-charges-2").html("");

            var medicine_name = $("#id-medicine-2").val();
            var obj = { smedicine_name: medicine_name };
            var jsonname = JSON.stringify(obj)

            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-fetch-one.php',
               type: "POST",
               data: jsonname,
               success: function (data) {

                  var db = (JSON.parse(data));
                  // console.log(db);


                  if (data.status == false) {
                     $("#id-charges-2").val("Cant Fetch");
                  }
                  else {
                     $("#id-charges-2").val(db[0].CHARGES);
                     no();
                     qty();
                     totalCharges();


                  }
               }
            });
         }

         function charge3() {
            $("#id-charges-3").html("");

            var medicine_name = $("#id-medicine-3").val();
            var obj = { smedicine_name: medicine_name };
            var jsonname = JSON.stringify(obj)

            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-fetch-one.php',
               type: "POST",
               data: jsonname,
               success: function (data) {

                  var db = (JSON.parse(data));
                  // console.log(db);


                  if (data.status == false) {
                     $("#id-charges-3").val("Cant Fetch");
                  }
                  else {
                     $("#id-charges-3").val(db[0].CHARGES);
                     no();
                     qty();
                     totalCharges();


                  }
               }
            });

         }


         function charge4() {
            $("#id-charges-4").html("");

            var medicine_name = $("#id-medicine-4").val();
            var obj = { smedicine_name: medicine_name };
            var jsonname = JSON.stringify(obj)

            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-fetch-one.php',
               type: "POST",
               data: jsonname,
               success: function (data) {

                  var db = (JSON.parse(data));
                  // console.log(db);


                  if (data.status == false) {
                     $("#id-charges-4").val("Cant Fetch");
                  }
                  else {
                     $("#id-charges-4").val(db[0].CHARGES);
                     no();
                     qty();
                     totalCharges();


                  }
               }
            });

         }


         function charge5() {
            $("#id-charges-5").html("");

            var medicine_name = $("#id-medicine-5").val();
            var obj = { smedicine_name: medicine_name };
            var jsonname = JSON.stringify(obj)

            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-fetch-one.php',
               type: "POST",
               data: jsonname,
               success: function (data) {

                  var db = (JSON.parse(data));
                  // console.log(db);


                  if (data.status == false) {
                     $("#id-charges-5").val("Cant Fetch");
                  }
                  else {
                     $("#id-charges-5").val(db[0].CHARGES);
                     no();
                     qty();
                     totalCharges();


                  }
               }
            });

         }


         function charge6() {
            $("#id-charges-6").html("");

            var medicine_name = $("#id-medicine-6").val();
            var obj = { smedicine_name: medicine_name };
            var jsonname = JSON.stringify(obj)

            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-fetch-one.php',
               type: "POST",
               data: jsonname,
               success: function (data) {

                  var db = (JSON.parse(data));
                  // console.log(db);


                  if (data.status == false) {
                     $("#id-charges-6").val("Cant Fetch");
                  }
                  else {
                     $("#id-charges-6").val(db[0].CHARGES);
                     no();
                     qty();
                     totalCharges();


                  }
               }
            });

         }


         // search medicine name from table
         function medicinename1() {
            $("#medicinelist1").html("");               //empty search list
            var medicine_name = $(this).val();


            if (medicine_name != "") {
               $.ajax({
                  url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-search.php?smedicine_name=' + medicine_name,
                  type: "GET",
                  dataType: "json",
                  success: function (data) {
                     console.log(data)

                     if (data.status == false) {
                        $("#table-id").fadeIn("fast").append("<ul>" +
                           "<li>" + "NOT FOUND" + "</li>" + "</ul>")
                     }
                     else {

                        //dropdown  type search
                        $.each(data, function (key, value) {
                           $("#medicinelist1").fadeIn("fast").append("<ul>" +
                              "<li>" + value.PERTICULAR + "</li>" + "</ul>");
                        });
                     }
                  }
               });

               $("#id-medicine-1").focusout(("#medicinelist1").fadeOut);
               // var d=$("#id-medicine-1").focusout(("#medicinelist li"));
               // console.log(d,d.val)
            }
            else {

               $("#medicinelist1").fadeOut();
               $("#id-qty-1").html("");
               // $("#id-charges-3").html("");
            }
         }
         //  tab to get first li value in field
         $(document).on("blur", "#id-medicine-1", function () {

            let c = $("#medicinelist1 ul:first li:nth-child(1)").text();

            if (c != "") {
               $("#id-medicine-1").val(c);
            }

            // $("#medicinelist1 ul:first li:nth-child(1)").text("")
            // var c=$("#medicinelist1 ul:first li:nth-child(1)").val($(this).text());
            // var c=$("#medicinelist1 ul:first li:nth-child(1)").css("color","green");

            console.log(c)
            $("#medicinelist1").fadeOut();
            charge1();
            // totalCharges();
         });

         //  click to get li value in field
         $(document).on("click", "#medicinelist1 li", function () {
            $("#id-medicine-1").val($(this).text());
            $("#medicinelist1").fadeOut();
            charge1();
            // totalCharges();
         });
         // fadeOut search list
         $(document).on("blur", "#id-medicine-1", function () {
            $("#medicinelist1").fadeOut();
         });
         // on blur qty having 1
         $("#id-medicine-1").change(function () {
            $("#id-qty-1").val(1)
         });
         // onfocus chages  qty*chages
         $("#id-charges-1").on("focus", function () {
            var qty = $("#id-qty-1").val()
            console.log(qty)
            const ch = $("#id-charges-1").val()
            console.log(ch)
            if (qty != "") {
               var t = qty * ch;
               $("#id-charges-1").val(t)
            }
         })




         function medicinename2() {
            $("#medicinelist2").html("");               //empty search list
            var medicine_name = $(this).val();


            if (medicine_name != "") {
               $.ajax({
                  url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-search.php?smedicine_name=' + medicine_name,
                  type: "GET",
                  dataType: "json",
                  success: function (data) {
                     console.log(data)

                     if (data.status == false) {
                        $("#table-id").fadeIn("fast").append("<ul>" +
                           "<li>" + "NOT FOUND" + "</li>" + "</ul>")
                     }
                     else {

                        //dropdown  type search
                        $.each(data, function (key, value) {
                           $("#medicinelist2").fadeIn("fast").append("<ul>" +
                              "<li>" + value.PERTICULAR + "</li>" + "</ul>");
                        });
                     }
                  }
               });
               $("#id-medicine-2").focusout(("#medicinelist2").fadeOut);
            }
            else {
               $("#medicinelist2").fadeOut();

            }
         }
         $(document).on("blur", "#id-medicine-2", function () {
            let c = $("#medicinelist2 ul:first li:nth-child(1)").text();

            if (c != "") {
               $("#id-medicine-2").val(c);
            }

            console.log(c)
            $("#medicinelist2").fadeOut();
            charge2();
            // totalCharges();
         });

         $(document).on("click", "#medicinelist2 li", function () {
            $("#id-medicine-2").val($(this).text());
            $("#medicinelist2").fadeOut();
            charge2();
            // totalCharges();

         });
         $(document).on("blur", "#id-medicine-2", function () {
            $("#medicinelist2").fadeOut();
         });
         $("#id-medicine-2").change(function () {
            $("#id-qty-2").val(1)
         });
         $("#id-charges-2").on("focus", function () {
            var qty = $("#id-qty-2").val()
            const ch = $("#id-charges-2").val()
            if (qty != "") {
               var t = qty * ch;
               $("#id-charges-2").val(t)
            }
         })
         $("#id-charges-2").on("blur", function () {
            // no();
            qty();
         });

         function medicinename3() {
            $("#medicinelist3").html("");               //empty search list
            var medicine_name = $(this).val();


            if (medicine_name != "") {
               $.ajax({
                  url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-search.php?smedicine_name=' + medicine_name,
                  type: "GET",
                  dataType: "json",
                  success: function (data) {
                     console.log(data)

                     if (data.status == false) {
                        $("#table-id").fadeIn("fast").append("<ul>" +
                           "<li>" + "NOT FOUND" + "</li>" + "</ul>")
                     }
                     else {

                        //dropdown  type search
                        $.each(data, function (key, value) {
                           $("#medicinelist3").fadeIn("fast").append("<ul>" +
                              "<li>" + value.PERTICULAR + "</li>" + "</ul>");
                        });
                     }
                  }
               });
               $("#id-medicine-3").focusout(("#medicinelist").fadeOut);
            }
            else {
               $("#medicinelist3").fadeOut();

            }
         }
         $(document).on("blur", "#id-medicine-3", function () {
            let c = $("#medicinelist3 ul:first li:nth-child(1)").text();

            if (c != "") {
               $("#id-medicine-3").val(c);
            }
            console.log(c)
            $("#medicinelist3").fadeOut();
            charge3();
            // totalCharges();
         });
         $(document).on("click", "#medicinelist3 li", function () {
            $("#id-medicine-3").val($(this).text());
            $("#medicinelist3").fadeOut();
            charge3();
            // totalCharges();

         });
         $(document).on("blur", "#id-medicine-3", function () {
            $("#medicinelist3").fadeOut();

         });
         $("#id-medicine-3").change(function () {
            $("#id-qty-3").val(1)
         });
         $("#id-charges-3").on("focus", function () {
            var qty = $("#id-qty-3").val()
            console.log(qty)
            const ch = $("#id-charges-3").val()
            console.log(ch)
            if (qty != "") {
               var t = qty * ch;
               $("#id-charges-3").val(t)
            }
         })
         $("#id-charges-3").on("blur", function () {
            // no();
            qty();
         });


         function medicinename4() {
            $("#medicinelist4").html("");               //empty search list
            var medicine_name = $(this).val();


            if (medicine_name != "") {
               $.ajax({
                  url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-search.php?smedicine_name=' + medicine_name,
                  type: "GET",
                  dataType: "json",
                  success: function (data) {
                     console.log(data)

                     if (data.status == false) {
                        $("#table-id").fadeIn("fast").append("<ul>" +
                           "<li>" + "NOT FOUND" + "</li>" + "</ul>")
                     }
                     else {

                        //dropdown  type search
                        $.each(data, function (key, value) {
                           $("#medicinelist4").fadeIn("fast").append("<ul>" +
                              "<li>" + value.PERTICULAR + "</li>" + "</ul>");
                        });
                     }
                  }
               });
               $("#id-medicine-4").focusout(("#medicinelist").fadeOut);
            }
            else {
               $("#medicinelist4").fadeOut();

            }
         }
         $(document).on("blur", "#id-medicine-4", function () {
            let c = $("#medicinelist4 ul:first li:nth-child(1)").text();

            if (c != "") {
               $("#id-medicine-4").val(c);
            }
            console.log(c)
            $("#medicinelist4").fadeOut();
            charge4();
            // totalCharges();
         });
         $(document).on("click", "#medicinelist4 li", function () {
            $("#id-medicine-4").val($(this).text());
            $("#medicinelist4").fadeOut();
            charge4();
            // totalCharges();

         });
         $(document).on("blur", "#id-medicine-4", function () {
            $("#medicinelist4").fadeOut();

         });
         $("#id-medicine-4").change(function () {
            $("#id-qty-4").val(1)
         });
         $("#id-charges-4").on("focus", function () {
            var qty = $("#id-qty-4").val()
            console.log(qty)
            const ch = $("#id-charges-4").val()
            console.log(ch)
            if (qty != "") {
               var t = qty * ch;
               $("#id-charges-4").val(t)
            }
         })
         $("#id-charges-4").on("blur", function () {
            // no();
            qty();
         });


         function medicinename5() {
            $("#medicinelist5").html("");               //empty search list
            var medicine_name = $(this).val();


            if (medicine_name != "") {
               $.ajax({
                  url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-search.php?smedicine_name=' + medicine_name,
                  type: "GET",
                  dataType: "json",
                  success: function (data) {
                     console.log(data)

                     if (data.status == false) {
                        $("#table-id").fadeIn("fast").append("<ul>" +
                           "<li>" + "NOT FOUND" + "</li>" + "</ul>")
                     }
                     else {

                        //dropdown  type search
                        $.each(data, function (key, value) {
                           $("#medicinelist5").fadeIn("fast").append("<ul>" +
                              "<li>" + value.PERTICULAR + "</li>" + "</ul>");
                        });
                     }
                  }
               });
               $("#id-medicine-5").focusout(("#medicinelist").fadeOut);
            }
            else {
               $("#medicinelist5").fadeOut();

            }
         }
         $(document).on("blur", "#id-medicine-5", function () {
            let c = $("#medicinelist5 ul:first li:nth-child(1)").text();

            if (c != "") {
               $("#id-medicine-5").val(c);
            }
            console.log(c)
            $("#medicinelist5").fadeOut();
            charge5();
            // totalCharges();
         });
         $(document).on("click", "#medicinelist5 li", function () {
            $("#id-medicine-5").val($(this).text());
            $("#medicinelist5").fadeOut();
            charge5();
            // totalCharges();

         });
         $(document).on("blur", "#id-medicine-5", function () {
            $("#medicinelist5").fadeOut();

         });
         $("#id-medicine-5").change(function () {
            $("#id-qty-5").val(1)
         });
         $("#id-charges-5").on("focus", function () {
            var qty = $("#id-qty-5").val()
            console.log(qty)
            const ch = $("#id-charges-5").val()
            console.log(ch)
            if (qty != "") {
               var t = qty * ch;
               $("#id-charges-5").val(t)
            }
         })
         $("#id-charges-5").on("blur", function () {
            // no();
            qty();
         });


         function medicinename6() {
            $("#medicinelist6").html("");               //empty search list
            var medicine_name = $(this).val();


            if (medicine_name != "") {
               $.ajax({
                  url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-search.php?smedicine_name=' + medicine_name,
                  type: "GET",
                  dataType: "json",
                  success: function (data) {
                     console.log(data)

                     if (data.status == false) {
                        $("#table-id").fadeIn("fast").append("<ul>" +
                           "<li>" + "NOT FOUND" + "</li>" + "</ul>")
                     }
                     else {

                        //dropdown  type search
                        $.each(data, function (key, value) {
                           $("#medicinelist6").fadeIn("fast").append("<ul>" +
                              "<li>" + value.PERTICULAR + "</li>" + "</ul>");
                        });
                     }
                  }
               });
               $("#id-medicine-6").focusout(("#medicinelist").fadeOut);
            }
            else {
               $("#medicinelist6").fadeOut();

            }
         }
         $(document).on("blur", "#id-medicine-6", function () {
            let c = $("#medicinelist6 ul:first li:nth-child(1)").text();

            if (c != "") {
               $("#id-medicine-6").val(c);
            }
            console.log(c)
            $("#medicinelist6").fadeOut();
            charge6();
            // totalCharges();
         });
         $(document).on("click", "#medicinelist6 li", function () {
            $("#id-medicine-6").val($(this).text());
            $("#medicinelist6").fadeOut();
            charge6();
            // totalCharges();

         });
         $(document).on("blur", "#id-medicine-6", function () {
            $("#medicinelist6").fadeOut();

         });
         $("#id-medicine-6").change(function () {
            $("#id-qty-6").val(1)
         });
         $("#id-charges-6").on("focus", function () {
            var qty = $("#id-qty-6").val()
            console.log(qty)
            const ch = $("#id-charges-6").val()
            console.log(ch)
            if (qty != "") {
               var t = qty * ch;
               $("#id-charges-6").val(t)
            }
         })
         $("#id-charges-6").on("blur", function () {
            // no();
            qty();
         });





         //for total medicne
         function totalCharges() {
            var ch1 = $("#id-charges-1").val()
            var ch2 = $("#id-charges-2").val()
            var ch3 = $("#id-charges-3").val()
            var ch4 = $("#id-charges-4").val()
            var ch5 = $("#id-charges-5").val()
            var ch6 = $("#id-charges-6").val()
            if (ch1 != "") { ch1 = parseInt(ch1); }
            if (ch2 != "") { ch2 = parseInt(ch2); }
            if (ch3 != "") { ch3 = parseInt(ch3); }
            if (ch4 != "") { ch4 = parseInt(ch4); }
            if (ch5 != "") { ch5 = parseInt(ch5); }
            if (ch6 != "") { ch6 = parseInt(ch6); }
            console.log(ch1)
            console.log(ch2)

            var total1 = ch1 + ch2 + ch3 + ch4 + ch5 + ch6;
            // console.log(total)
            // console.log(typeof(total))
            $("#total").val(total1)
            // console.log($(".total").text())

         }

         //change from change to blur event
         $(".ipt-charges").on("blur", function () {
            var ch1 = $("#id-charges-1").val()
            var ch2 = $("#id-charges-2").val()
            var ch3 = $("#id-charges-3").val()
            var ch4 = $("#id-charges-4").val()
            var ch5 = $("#id-charges-5").val()
            var ch6 = $("#id-charges-6").val()
            if (ch1 != "") { ch1 = parseInt(ch1); }
            if (ch2 != "") { ch2 = parseInt(ch2); }
            if (ch3 != "") { ch3 = parseInt(ch3); }
            if (ch4 != "") { ch4 = parseInt(ch4); }
            if (ch5 != "") { ch5 = parseInt(ch5); }
            if (ch6 != "") { ch6 = parseInt(ch6); }
            console.log(ch1)
            console.log(ch2)

            var total1 = ch1 + ch2 + ch3 + ch4 + ch5 + ch6;
            // console.log(total)
            // console.log(typeof(total))
            $("#total").val(total1)
            // console.log($(".total").text())
         });

         $(".medicinename").on("blur", function () {
            no();
         })

         function no() {
            var totalno = 0;
            $('.medicinename').each(function (index, value) {
               console.log(`${this.value}`);
               var medi = this.value;
               if (medi != "") {
                  totalno = totalno + 1
               }

            });
            console.log(totalno)
            $("#totalno").val(totalno)

         }

         $(".qty").on("blur", function () {
            qty();
         })

         function qty() {
            var totalqty = 0;
            $('.qty').each(function (index, value) {
               console.log(`${this.value}`);
               var qtyno = this.value;
               if (qtyno != "") {
                  totalqty = totalqty + parseInt(qtyno)
               }

            });
            console.log(totalqty)
            $("#totalqty").val(totalqty)

         }


         // $(".ipt-charges").on("blur", function () {

         //    function no() {
         //       var totalno = 0;
         //       $('.medicinename').each(function (index, value) {
         //          console.log(`${this.value}`);
         //          var medi = this.value;
         //          if (medi != "") {
         //             totalno = totalno + 1
         //          }

         //       });
         //       console.log(totalno)
         //       $("#totalno").val(totalno)

         //    }
         // });



         // $("#id-btnsub").on("click", btnclick())
         // // insert data1
         // function btnclick() {

         $("#id-btnsub").on("click", function (e) {
            e.preventDefault();

            // for medicine fild

            //serialize filed into Array to send data to api
            var arr = $(".medicinename").serializeArray();

            var objArr = {};

            for (let i = 0; i < arr.length; i++) {
               if (arr[i].value == '') {
                  // alert("fill all filed");
                  // return false;
                  arr[i].name = "";
                  // delete arr[i];
                  // arr.length = arr.length - 1;
               } else {
                  objArr[arr[i].name] = arr[i].value;   //obj 
               }
            }
            console.log(objArr);
            var medicineInArr = Object.values(objArr);   //array
            medicineInArr = JSON.stringify(medicineInArr)

            console.log(medicineInArr);
            arrObjmedicine = { smedicinearr: medicineInArr };
            arryObjmedicineJson = JSON.stringify(arrObjmedicine)


            //// for qty fild

            var qtyarr = $(".qty").serializeArray();

            var qtyobjArr = {};

            for (let i = 0; i < qtyarr.length; i++) {
               if (qtyarr[i].value == '') {
                  // alert("fill all filed");
                  // return false;
                  qtyarr[i].name = "";
                  // delete qtyarr[i];
                  // qtyarr.length = qtyarr.length - 1;
               } else {
                  qtyobjArr[qtyarr[i].name] = qtyarr[i].value;
               }
            }
            console.log(qtyobjArr);
            var qtyInArr = Object.values(qtyobjArr);
            qtyInArr = JSON.stringify(qtyInArr)

            console.log(qtyInArr);
            arrObjqty = { sqtyarr: qtyInArr };
            arrObjqtyJson = JSON.stringify(arrObjqty)

            //for price


            var pricearr = $(".ipt-charges").serializeArray();

            var priceobjArr = {};
            for (let i = 0; i < pricearr.length; i++) {
               if (pricearr[i].value == '') {
                  // alert("fill all filed");
                  // return false;
                  pricearr[i].name = "";
                  // delete pricearr[i];
                  // pricearr.length = pricearr.length - 1;
               } else {
                  priceobjArr[pricearr[i].name] = pricearr[i].value;
               }
            }
            console.log(priceobjArr);
            var priceInArr = Object.values(priceobjArr);
            priceInArr = JSON.stringify(priceInArr)

            console.log(priceInArr);
            arrObjPrice = { spricearr: priceInArr };
            arrObjPriceJson = JSON.stringify(arrObjPrice)



            //for opdno and date
            var opdno = localStorage.getItem('opdno')  //"107"
            opdno = parseInt(opdno)
            var date1 = localStorage.getItem('date')    //"2022-03-04"

            var obj1 = { sopdno: opdno, sdate: date1 };
            console.log(obj1);

            var finalResult = Object.assign(objArr, qtyobjArr, obj1);
            console.log(finalResult)
            var jsonname2 = JSON.stringify(finalResult)


            // insert qty into medicine name in anventory
            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-insert.php',
               type: "POST",
               data: jsonname2,
               success: function (data) {
                  console.log(data)
                  if (data.status == true) {
                     // alert(data.message)
                  }
                  else {
                     console.log("notworking");
                     alert(data.message);

                  }
               }
            })


            var finalResultmedicine = Object.assign(arrObjmedicine, obj1);
            var finalResultmedicineJson = JSON.stringify(finalResultmedicine)
            console.log(finalResultmedicineJson)

            // insert //medicine//,qty,price into homo_bill in array form
            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-insert-in-bill-medicine-in-array.php',
               type: "POST",
               data: finalResultmedicineJson,
               success: function (data) {
                  console.log(data)
                  if (data.status == true) {
                     // alert(data.message)
                  }
                  else {
                     console.log("notworking");
                     alert(data.message);

                  }
               }
            })


            var finalResultqty = Object.assign(arrObjqty, obj1);
            var finalResultqtyJson = JSON.stringify(finalResultqty)
            console.log(finalResultqtyJson)

            // insert medicine,//qty//,price into homo_bill in array form
            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-insert-in-bill-qty-in-array.php',
               type: "POST",
               data: finalResultqtyJson,
               success: function (data) {
                  console.log(data)
                  if (data.status == true) {
                     // alert(data.message)
                  }
                  else {
                     console.log("notworking");
                     alert(data.message);

                  }
               }
            })


            var finalResultPrice = Object.assign(arrObjPrice, obj1);
            var finalResultPriceJson = JSON.stringify(finalResultPrice)
            finalResultPriceJson = JSON.stringify(finalResultPrice)
            console.log(finalResultPriceJson)


            // insert medicine,qty,//price// into homo_bill in array form
            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-insert-in-bill-price-in-array.php',
               type: "POST",
               data: finalResultPriceJson,
               success: function (data) {
                  console.log(data)
                  if (data.status == true) {
                     // alert(data.message)
                  }
                  else {
                     console.log("notworking");
                     alert(data.message);

                  }
               }
            })


            var totalnoinsert = $("#totalno").val();
            var totalqtyinsert = $("#totalqty").val();
            var totalinsert = $("#total").val();
            var objtotal = { stotal: totalinsert, stotalqty: totalqtyinsert, stotalno: totalnoinsert };
            console.log(obj1);
            var finaltotal = Object.assign(objtotal, obj1);
            finaltotal = JSON.stringify(finaltotal)

            // inserting noOfMedicine qtyOfMedicine totalOfMedicine
            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-insert-total-medicine-price.php',
               type: "POST",
               data: finaltotal,
               success: function (data) {
                  console.log(data)
                  if (data.status == true) {
                     // alert(data.message)
                  }
                  else {
                     console.log("notworking");
                     alert(data.message);

                  }
               }
            })

            ////inserting total into inv to total med/// also in other
            $.ajax({
               url: 'http://localhost:3000/html/homoeopathic/medicine_api/api-insert-total-medicine-price-in-inventory.php',
               type: "POST",
               data: finaltotal,
               success: function (data) {
                  console.log(data)
                  if (data.status == true) {
                     // alert(data.message)
                  }
                  else {
                     console.log("notworking");
                     alert(data.message);

                  }
               }
            })




            location.href = 'http://localhost:3000/html/homoeopathic/patient_process.html';



         })

         // }

      });
   </script>

</body>

</html>


<!-- MAJOR DRESSING(DEPENDS ON DRESSING) rename in homo table due to spacing
STICHES(1ST STITCH) also OTHER STITCH 	1 WEEK DISPENSARY CHARGES 	2 WEEK DISPENSARY CHARGES -->